<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>HTML5格式-JS</title>
		<style type="text/css">
			#d2{
				width: 200px;
				height:30px ;
				border:1px solid darkred;
				display:inline-block;
			}
			#d3{
				display:inline-block;
				background:yellow ;
				height:30px;
			}
		</style>
		<script type="text/javascript">
			//window.onload=init;
			var dingshi;//定时器名字
			var sj;//清除时间定时器名
			var count=0;
			//点击开始游戏的函数
			var n=0;
			//记录游戏时间的变量
			function startGame(){
				window.clearInterval(sj);
				window.clearInterval(dingshi);
				
				sj=window.setInterval("shijian()",1000);
				dingshi=window.setInterval("star()",500);
			}
			
			function star(){
			//创建星星	
			var obj=document.createElement("img");
			obj.src="photo/gameover.jpg"
			var w=Math.floor(Math.random()*80+20);
			obj.width=w;
			//随机位置
			var x=Math.floor(Math.random()*1166+100);
			var y=Math.floor(Math.random()*500+100);
			obj.style.position="absolute";
			obj.style.top=y+"px";
			obj.style.left=x+"px";
			//添加点击事件
			//放到body中
			obj.onclick=removeStar;
			count++;
			var sp=document.getElementById("d3");//进度条宽度
			sp.style.width=count*10+"px";
			if(count>=20){
				alert("游戏进行了"+n+"秒,击败了全国99%的对手，点击确定继续挑战");
				window.clearInterval(dingshi);
				location.reload();
			}
			
			document.body.appendChild(obj);
			}
			//点击删除
			function removeStar(){
				this.parentNode.removeChild(this);
				count--;
				var sp=document.getElementById("d3");//进度条宽度
				sp.style.width=count*10+"px";
				}
			//暂停游戏
			function clk(){
				//window.clearInterval(dingshi);
				alert("暂停！点击确定继续游戏");
				
			}
			//记录游戏时间的函数
			function shijian(){
				n++;
				var obj=document.getElementById("d1");
				obj.innerHTML="游戏进行了"+n+"秒";
			}
		</script>
		</head>
		<body>
			<input type="button"value="开始" onclick="startGame()"/>
			<input type="button"value="暂停" onclick="clk()"/>
			<span id="d1">游戏进度为0秒</span>
			<span id="d2">
				<span id="d3"></span>
			</span>
			
         
	    </body>
</html>
